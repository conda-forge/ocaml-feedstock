context:
  name: ocaml
  version: 5.4.0
  flexdll_version: 0.44
  arm64_sdk: 11.0
  m2: ${{ "m2-" if not unix }}
  library: ${{ "Library/" if not unix }}
  sh: ${{ "sh" if unix else "bat" }}
  so: ${{ "so" if unix else "dll" }}
  
package:
  name: ocaml
  version: ${{ version }}

source:
  - url: https://github.com/ocaml/ocaml/archive/refs/tags/${{ version }}.tar.gz
    sha256: 4ab55ac30d247e20f35df20a9f7596e5eb5f92fbbd0f8e3e54838bbc3edf931e
  - if: win
    then:
      url: https://github.com/ocaml/flexdll/archive/refs/tags/${{ flexdll_version }}.tar.gz
      sha256: b7c6a92286f1f3065324d51083dcb16eec436a4e6e3b8df7cf836b6d7a8b9491
      target_directory: flexdll

build:
  number: 0
  script:
    env:
      SKIP_MAKE_TESTS: 1
      ARM64_SDK: ${{ arm64_sdk }}
  dynamic_linking:
    missing_dso_allowlist:
      - if: linux
        then:
          - ld-linux-aarch64.${{ so }}.1  # PPC64LE cross-compiler
          - ld64.${{ so }}.2              # AARCH64 cross-compiler
      - if: osx
        then:
          - /usr/lib/libSystem.B.dylib
      - if: not unix
        then:
          - C:/Windows/system32/SHLWAPI.dll
          - C:/Windows/system32/VERSION.dll
  prefix_detection:
    force_file_type:
      text:
        # These are actual text files that need prefix relocation
        - lib/ocaml/ld.conf
        - lib/ocaml/Makefile.config
        - lib/ocaml/runtime-launch-info
        - lib/ocaml-cross-compilers/*/lib/ocaml/ld.conf
        - lib/ocaml-cross-compilers/*/lib/ocaml/Makefile.config
        - lib/ocaml-cross-compilers/*/lib/ocaml/runtime-launch-info
    ignore:
      # Only ignore bytecode files (binary format, relocation corrupts them)
      - lib/ocaml/**/*.cmo
      - lib/ocaml/**/*.cma
      - lib/ocaml/**/*.cmi
      - lib/ocaml/**/*.cmx
      - lib/ocaml/**/*.cmt
      - lib/ocaml/**/*.cmti
      # Bytecode executables - MUST ignore to avoid corrupting binary data
      # These use #!/usr/bin/env ocamlrun shebang which doesn't need relocation
      - bin/ocaml
      - bin/ocamlc.byte
      - bin/ocamlcmt
      - bin/ocamlcp
      - bin/ocamldebug
      - bin/ocamldoc
      - bin/ocamldep.byte
      - bin/ocamllex.byte
      - bin/ocamlmklib
      - bin/ocamlmktop
      - bin/ocamlobjinfo.byte
      - bin/ocamlopt.byte
      - bin/ocamloptp
      - bin/ocamlprof
      - if: (linux or osx) and x86_64
        then:
          - lib/ocaml-cross-compilers/*/lib/ocaml/**/*.cmo
          - lib/ocaml-cross-compilers/*/lib/ocaml/**/*.cma
          - lib/ocaml-cross-compilers/*/lib/ocaml/**/*.cmi
          - lib/ocaml-cross-compilers/*/lib/ocaml/**/*.cmx
          - lib/ocaml-cross-compilers/*/lib/ocaml/**/*.cmt
          - lib/ocaml-cross-compilers/*/lib/ocaml/**/*.cmti

requirements:
  run_exports:
    - ${{ pin_subpackage("ocaml", upper_bound="x.x.x") }}
  build:
    - ${{ compiler('c') }}
    - ${{ stdlib('c') }}
    - ${{ m2 }}bash >=5.2
    - ${{ m2 }}file
    - ${{ m2 }}findutils
    - ${{ m2 }}gawk
    - ${{ m2 }}grep
    - ${{ m2 }}make
    - ${{ m2 }}sed
    - binutils
    - pkgconfig
    - if: linux and x86_64
      then:
        - ${{ c_compiler }}_impl_linux-aarch64 ${{ c_compiler_version }}.*
        - ${{ c_compiler }}_impl_linux-ppc64le ${{ c_compiler_version }}.*
        - ${{ c_stdlib }}_linux-aarch64 =${{ c_stdlib_version }}
        - ${{ c_stdlib }}_linux-ppc64le =${{ c_stdlib_version }}
        - binutils_impl_linux-aarch64
        - binutils_impl_linux-ppc64le
    - if: osx and x86_64
      then:
        - ${{ c_compiler }}_impl_osx-arm64 ${{ c_compiler_version }}.*
        - ${{ c_stdlib }}_osx-arm64 =${{ arm64_sdk }}
    - if: not unix
      then:
        - ${{ m2 }}coreutils
        - ${{ m2 }}diffutils
        - ${{ m2 }}which
    - if: aarch64 or ppc64le or arm64
      then:
        - ocaml >=5.3
        - zstd
    - if: osx
      then:
        - lld ${{ c_compiler_version }}.*
        - llvm-tools ${{ c_compiler_version }}.*
  host:
    - zstd
  run:
    # OCaml runtime links against zstd for compressed marshaling
    - zstd

tests:
  - package_contents:
      bin:
        - ocaml
        - ocamlc
        - ocamlc.byte
        - ocamlc.opt
        - ocamlcmt
        - ocamlcp
        - ocamldep
        - ocamldep.byte
        - ocamldep.opt
        - ocamllex
        - ocamllex.byte
        - ocamllex.opt
        - ocamlmklib
        - ocamlmktop
        - ocamlobjinfo
        - ocamlobjinfo.byte
        - ocamlobjinfo.opt
        - ocamlopt
        - ocamlopt.byte
        - ocamlopt.opt
        - ocamloptp
        - ocamlprof
        - ocamlrun
        - ocamlrund
        - ocamlyacc
        - if: build_platform == target_platform
          then:
            - ocamldebug
            - ocamldoc
            - ocamldoc.opt
        - if: linux and x86_64
          then:
            - aarch64-conda-linux-gnu-ocamlc
            - aarch64-conda-linux-gnu-ocamldep
            - aarch64-conda-linux-gnu-ocamlobjinfo
            - aarch64-conda-linux-gnu-ocamlopt
            - powerpc64le-conda-linux-gnu-ocamlc
            - powerpc64le-conda-linux-gnu-ocamldep
            - powerpc64le-conda-linux-gnu-ocamlobjinfo
            - powerpc64le-conda-linux-gnu-ocamlopt
        - if: osx and x86_64
          then:
            - arm64-apple-darwin20.0.0-ocamlc
            - arm64-apple-darwin20.0.0-ocamldep
            - arm64-apple-darwin20.0.0-ocamlobjinfo
            - arm64-apple-darwin20.0.0-ocamlopt
        - if: unix
          then:
            - ocamlruni
          else:
            - flexlink
            - flexlink.byte
            - flexlink.opt
      files:
        - etc/conda/activate.d/ocaml_activate.${{ sh }}
        - etc/conda/deactivate.d/ocaml_deactivate.${{ sh }}
        - ${{ library }}lib/ocaml/libasmrun.a
        - ${{ library }}lib/ocaml/*.a
        - ${{ library }}lib/ocaml/ld.conf
        - ${{ library }}lib/ocaml/Makefile.config
        - ${{ library }}lib/ocaml/runtime-launch-info
        - ${{ library }}lib/ocaml/*.{cma,cmi,cmo,cmt,cmti,cmx,cmxa,ml,mli,o}
        - ${{ library }}lib/ocaml/caml/*.h
        - ${{ library }}lib/ocaml/compiler-libs/*
        - ${{ library }}lib/ocaml/dynlink/*
        - ${{ library }}lib/ocaml/profiling/*
        - ${{ library }}lib/ocaml/str/*
        - ${{ library }}lib/ocaml/threads/*
        - ${{ library }}lib/ocaml/unix/*
        - ${{ library }}lib/ocaml/stublibs/dll*.${{ so }}
        - ${{ library }}share/doc/ocaml/*
        - if: (build_platform == target_platform) and unix
          then:
            - ${{ library }}lib/ocaml/ocamldoc/*
            - share/man/man{1,3}/*
        - if: linux and x86_64
          then:
            - lib/ocaml-cross-compilers/*/lib/ocaml/libasmrun.a
            - lib/ocaml-cross-compilers/*/lib/ocaml/*.a
            - lib/ocaml-cross-compilers/aarch64-conda-linux-gnu/bin/ocamlc.opt
            - lib/ocaml-cross-compilers/aarch64-conda-linux-gnu/bin/ocamldep.opt
            - lib/ocaml-cross-compilers/aarch64-conda-linux-gnu/bin/ocamlobjinfo.opt
            - lib/ocaml-cross-compilers/aarch64-conda-linux-gnu/bin/ocamlopt.opt
            - lib/ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/runtime-launch-info
            - lib/ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.{cma,cmi,cmo,cmx,cmxa,o}
            - lib/ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/stublibs/dll*.${{ so }}
            - lib/ocaml-cross-compilers/powerpc64le-conda-linux-gnu/bin/ocamlc.opt
            - lib/ocaml-cross-compilers/powerpc64le-conda-linux-gnu/bin/ocamldep.opt
            - lib/ocaml-cross-compilers/powerpc64le-conda-linux-gnu/bin/ocamlobjinfo.opt
            - lib/ocaml-cross-compilers/powerpc64le-conda-linux-gnu/bin/ocamlopt.opt
            - lib/ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/runtime-launch-info
            - lib/ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/*.{cma,cmi,cmo,cmx,cmxa,o}
            - lib/ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/stublibs/dll*.${{ so }}
        - if: osx and x86_64
          then:
            - lib/ocaml-cross-compilers/arm64-apple-darwin20.0.0/bin/ocamlc.opt
            - lib/ocaml-cross-compilers/arm64-apple-darwin20.0.0/bin/ocamldep.opt
            - lib/ocaml-cross-compilers/arm64-apple-darwin20.0.0/bin/ocamlobjinfo.opt
            - lib/ocaml-cross-compilers/arm64-apple-darwin20.0.0/bin/ocamlopt.opt
            - lib/ocaml-cross-compilers/arm64-apple-darwin20.0.0/lib/ocaml/runtime-launch-info
            - lib/ocaml-cross-compilers/arm64-apple-darwin20.0.0/lib/ocaml/*.{cma,cmi,cmo,cmx,cmxa,o}
            - lib/ocaml-cross-compilers/arm64-apple-darwin20.0.0/lib/ocaml/stublibs/dll*.${{ so }}

  - script:
      - echo "=== Env., Resource files ==="
      - if: unix
        then: |
          echo "${OCAMLLIB:-'UNSET'}" | grep ocaml > /dev/null && { echo "OCAMLLIB set"; }
          head -2 ${PREFIX}/lib/ocaml/runtime-launch-info | grep ${PREFIX} > /dev/null && { echo "runtime-launch-info clean"; }
          head -2 ${PREFIX}/lib/ocaml/ld.conf | grep ${PREFIX} > /dev/null && { echo "ld.conf clean"; }
          cat ${PREFIX}/lib/ocaml/Makefile.config | grep ${PREFIX} > /dev/null && { echo "Makefile.config clean"; }
          STDLIB_PATH=$(ocamlc.opt -config-var standard_library) && echo "standard_library=$STDLIB_PATH"
          CC_PATH=$(ocamlc.opt -config-var c_compiler) && echo "c_compiler=$CC_PATH"
        else: |
          echo "%OCAMLLIB%" | grep ocaml
          echo "%PATH%" | grep ocaml
      - echo "PREFIX/PATH tests passed"
    requirements:
      run:
        - ${{ m2 }}grep

  - script:
      - echo "=== Check cross-binaries for correct arch ==="
      - if: build_platform != target_platform
        then:
          - if: aarch64
            then:
              - readelf -h ${PREFIX}/bin/ocamlc.opt | grep -q "AArch64" || { echo "ocamlc.opt: Bad Arch"; exit 1; }
              - readelf -h ${PREFIX}/bin/ocamlopt.opt | grep -q "AArch64" || { echo "ocamlopt.opt: Bad Arch"; exit 1; }
              - readelf -h ${PREFIX}/bin/ocamllex.opt | grep -q "AArch64" || { echo "ocamllex.opt: Bad Arch"; exit 1; }
              - readelf -h ${PREFIX}/bin/ocamldep.opt | grep -q "AArch64" || { echo "ocamldep.opt: Bad Arch"; exit 1; }
              - readelf -h ${PREFIX}/bin/ocamlobjinfo.opt | grep -q "AArch64" || { echo "ocamlobjinfo.opt: Bad Arch"; exit 1; }
              - readelf -h ${PREFIX}/bin/ocamlrun | grep -q "AArch64" || { echo "ocamlrun: Bad Arch"; exit 1; }
              - readelf -h ${PREFIX}/lib/ocaml/libasmrun_shared.so | grep -q "AArch64" || { echo "libasmrun_shared.so: Bad Arch"; exit 1; }
          - if: arm64
            then:
              - otool -hv ${PREFIX}/bin/ocamlc.opt | grep -iq "ARM64" || { echo "ocamlc.opt: Bad Arch"; exit 1; }
              - otool -hv ${PREFIX}/bin/ocamlopt.opt | grep -iq "ARM64" || { echo "ocamlopt.opt: Bad Arch"; exit 1; }
              - otool -hv ${PREFIX}/bin/ocamllex.opt | grep -iq "ARM64" || { echo "ocamllex.opt: Bad Arch"; exit 1; }
              - otool -hv ${PREFIX}/bin/ocamldep.opt | grep -iq "ARM64" || { echo "ocamldep.opt: Bad Arch"; exit 1; }
              - otool -hv ${PREFIX}/bin/ocamlobjinfo.opt | grep -iq "ARM64" || { echo "ocamlobjinfo.opt: Bad Arch"; exit 1; }
              - otool -hv ${PREFIX}/bin/ocamlrun | grep -iq "ARM64" || { echo "ocamlrun: Bad Arch"; exit 1; }
              - otool -hv ${PREFIX}/lib/ocaml/libasmrun_shared.dylib | grep -iq "ARM64" || { echo "libasmrun_shared: Bad Arch"; exit 1; }
          - if: ppc64le
            then:
              - readelf -h ${PREFIX}/bin/ocamlc.opt | grep -q "PowerPC64" || { echo "ocamlc.opt: Bad Arch"; exit 1; }
              - readelf -h ${PREFIX}/bin/ocamlopt.opt | grep -q "PowerPC64" || { echo "ocamlopt.opt: Bad Arch"; exit 1; }
              - readelf -h ${PREFIX}/bin/ocamllex.opt | grep -q "PowerPC64" || { echo "ocamllex.opt: Bad Arch"; exit 1; }
              - readelf -h ${PREFIX}/bin/ocamldep.opt | grep -q "PowerPC64" || { echo "ocamldep.opt: Bad Arch"; exit 1; }
              - readelf -h ${PREFIX}/bin/ocamlobjinfo.opt | grep -q "PowerPC64" || { echo "ocamlobjinfo.opt: Bad Arch"; exit 1; }
              - readelf -h ${PREFIX}/bin/ocamlrun | grep -q "PowerPC64" || { echo "ocamlrun: Bad Arch"; exit 1; }
              - readelf -h ${PREFIX}/lib/ocaml/libasmrun_shared.so | grep -q "PowerPC64" || { echo "libasmrun_shared.so: Bad Arch"; exit 1; }
          - echo "All cross-compiled binaries: CORRECT architecture âœ“"
        else:
          echo "Native build (no cross-compilation check needed)"

  - script:
      env:
        OCAMLRUNPARAM: "s=4M,o=1000"
      content:
        - echo "=== All binaries version/info output ==="
        - if: arm64
          then:
            - echo "Skipped test for ARM64"
          else: |
            echo "Testing ocamlc..." && ocamlc -version | grep ${{ version }}
            echo "Testing ocamldep..." && ocamldep -version | grep ${{ version }}
            echo "Testing ocamllex..." && ocamllex -version | grep ${{ version }}
            echo "Testing ocamlrun..." && ocamlrun -version | grep ${{ version }}
            echo "Testing ocamlyacc..." && ocamlyacc -version | grep ${{ version }}

            echo "Testing ocaml..." && ocaml -version | grep ${{ version }}
            echo "Testing ocamlcp..." && ocamlcp -version | grep ${{ version }}
            echo "Testing ocamlmklib..." && ocamlmklib -version | grep ${{ version }}
            echo "Testing ocamlmktop..." && ocamlmktop -version | grep ${{ version }}
            echo "Testing ocamloptp..." && ocamloptp -version | grep ${{ version }}
            echo "Testing ocamlprof..." && ocamlprof -version | grep ${{ version }}

            echo "Testing ocamlopt..." && ocamlopt -version | grep ${{ version }}
        - if: unix and not arm64
          then: |
            echo "Testing ocamlobjinfo..." && ocamlobjinfo -help | grep -q FILES
            echo "Testing ocamlobjinfo.opt..." && ocamlobjinfo.opt -help | grep -q FILES
            echo "Testing ocamlcmt..." && ocamlcmt -help | grep -q FILE
            echo "Testing ocamlobjinfo.byte..." && ocamlobjinfo.byte -help | grep -q FILES
        - if: not unix
          then: |
            echo "Testing ocamlobjinfo..." && ocamlobjinfo -help
            echo "Testing ocamlobjinfo.opt..." && ocamlobjinfo.opt -help
            echo "Testing ocamlcmt..." && ocamlcmt -help
            echo "Testing ocamlobjinfo.byte..." && ocamlobjinfo.byte -help
        - if: build_platform == target_platform
          then: |
            echo "Testing ocamldoc..." && ocamldoc -version | grep ${{ version }}
            echo "Testing ocamldoc.opt..." && ocamldoc.opt -version | grep ${{ version }}
            echo "Testing ocamldebug..." && ocamldebug -version | grep ${{ version }}
        - if: linux and x86_64
          then: |
            echo "Testing aarch64 cross-compilers..."
            echo "  ocamlc..." && aarch64-conda-linux-gnu-ocamlc -version | grep ${{ version }}
            echo "  ocamldep..." && aarch64-conda-linux-gnu-ocamldep -version | grep ${{ version }}
            echo "  ocamlobjinfo..." && aarch64-conda-linux-gnu-ocamlobjinfo -help | grep -q FILES
            echo "  ocamlopt..." && aarch64-conda-linux-gnu-ocamlopt -version | grep ${{ version }}
            echo "Testing ppc64le cross-compilers..."
            echo "  ocamlc..." && powerpc64le-conda-linux-gnu-ocamlc -version | grep ${{ version }}
            echo "  ocamldep..." && powerpc64le-conda-linux-gnu-ocamldep -version | grep ${{ version }}
            echo "  ocamlobjinfo..." && powerpc64le-conda-linux-gnu-ocamlobjinfo -help | grep -q FILES
            echo "  ocamlopt..." && powerpc64le-conda-linux-gnu-ocamlopt -version | grep ${{ version }}
        - if: osx and x86_64
          then: |
            echo "Testing arm64 cross-compilers..."
            echo "  ocamlc..." && arm64-apple-darwin20.0.0-ocamlc -version | grep ${{ version }}
            echo "  ocamldep..." && arm64-apple-darwin20.0.0-ocamldep -version | grep ${{ version }}
            echo "  ocamlobjinfo..." && arm64-apple-darwin20.0.0-ocamlobjinfo -help | grep -q FILES
            echo "  ocamlopt..." && arm64-apple-darwin20.0.0-ocamlopt -version | grep ${{ version }}
    requirements:
      run:
        - ${{ m2 }}grep

  - script:
      env:
        OCAMLRUNPARAM: "s=4M,o=1000"
      content:
        - echo "=== Exercise compilers with actual code ==="
        - if: arm64
          then:
            - echo "Skipped test for ARM64"
          else:
            - printf 'print_endline "Hello World"\n' > hi.ml
            - if: unix
              then: |
                  # 1. Bytecode compilation + execution
                  echo "=== Testing bytecode compilation ==="
                  ocamlc -o hi hi.ml && ./hi | grep "Hello World"
                  (mkdir -p tmp && cp hi tmp && (cd tmp; ./hi)) | grep "Hello World" && rm ./hi
                  ocamlrun ${PREFIX}/bin/ocamlc.byte -version | grep ${{ version }}

                  # 2. Native compilation + execution
                  echo "=== Testing native compilation ==="
                  ocamlopt -o hi hi.ml && ./hi | grep "Hello World" && rm ./hi

                  # 3. REPL test (ocaml toplevel)
                  echo "=== Testing REPL ==="
                  echo 'print_endline "REPL works";;' | ocaml 2>&1 || echo "REPL exit: $?"

                  # 4. ocamldep actually parsing files
                  echo "=== Testing ocamldep ==="
                  ocamldep hi.ml
 
                  # 5. Multi-file compilation (exercises module system)
                  echo "=== Testing multi-file compilation ==="
                  printf 'let greet () = print_endline "From Lib"\n' > lib.ml
                  printf 'let () = Lib.greet ()\n' > main.ml
                  ocamlc -c lib.ml
                  ocamlc -c main.ml
                  ocamlc -o multi lib.cmo main.cmo
                  ./multi | grep "From Lib"

                  echo "=== Bytecode compiler via ocamlrun ==="
                  ocamlrun ${PREFIX}/bin/ocamlc.byte -version
                  printf 'print_endline "Hi CF"\n' > hi.ml && ocamlrun ${PREFIX}/bin/ocamlc.byte -o hi hi.ml && ./hi && rm ./hi

                  echo "=== All compilation tests passed ==="
              else:
                - ocamlc -o hi.exe hi.ml && hi.exe | grep Hello && rm hi.exe
    requirements:
      run:
        - ${{ c_compiler }}_impl_${{ target_platform }} >=${{ c_compiler_version }}
        - ${{ m2 }}file
        - ${{ m2 }}grep
        - if: osx
          then:
            - lld >=${{ c_compiler_version }}
            - llvm-tools >=${{ c_compiler_version }}

  - script:
      env:
        OCAMLRUNPARAM: "s=4M,o=1000"
      content:
        - echo "=== Exercise cross-compilers with actual code ==="
        - if: linux and x86_64
          then: |
            echo "=== Testing cross-compiler compilation ==="
            printf 'print_endline "Hello World from AARCH64"\n' > hi.ml
            aarch64-conda-linux-gnu-ocamlopt -o hi hi.ml
            QEMU_LD_PREFIX=${PREFIX}/aarch64-conda-linux-gnu/sysroot qemu-execve-aarch64 ./hi | grep "Hello World" && rm ./hi
            printf 'print_endline "Hello World from PPC64LE"\n' > hi.ml
            powerpc64le-conda-linux-gnu-ocamlopt -o hi hi.ml
            # QEMU_CPU=power9 QEMU_LD_PREFIX=${PREFIX}/powerpc64le-conda-linux-gnu/sysroot qemu-execve-ppc64le ./hi | grep "Hello World" && rm ./hi
          else:
            - echo "No cross-compiler tests"
    requirements:
      run:
        - if: linux and x86_64
          then:
            - ${{ c_compiler }}_impl_linux-64 >=${{ c_compiler_version }}
            - ${{ c_compiler }}_impl_linux-aarch64 ${{ c_compiler_version }}.*
            - ${{ c_compiler }}_impl_linux-ppc64le ${{ c_compiler_version }}.*
            - ${{ c_stdlib }}_linux-64 >=${{ c_stdlib_version }}
            - ${{ c_stdlib }}_linux-aarch64 >=${{ c_stdlib_version }}
            - ${{ c_stdlib }}_linux-ppc64le >=${{ c_stdlib_version }}
            - binutils_impl_linux-aarch64
            - binutils_impl_linux-ppc64le
            - qemu-execve-aarch64
            - qemu-execve-ppc64le

about:
  homepage: https://ocaml.org/
  license: LGPL-2.1-only WITH OCaml-LGPL-linking-exception
  license_family: LGPL
  license_file: LICENSE
  summary: Objective Caml (OCaml) is an implementation of the ML language.
  description: |
    OCaml is an implementation of the ML language, based on the Caml Light
    dialect extended with a complete class-based object system and a powerful
    module system in the style of Standard ML.

    OCaml comprises two compilers. One generates bytecode which is then
    interpreted by a C program. This compiler runs quickly, generates compact
    code with moderate memory requirements, and is portable to essentially any
    32 or 64 bit Unix platform. Performance of generated programs is quite good
    for a bytecoded implementation.  This compiler can be used either as a
    standalone, batch-oriented compiler that produces standalone programs, or as
    an interactive, toplevel-based system.

    The other compiler generates high-performance native code for a number of
    processors. Compilation takes longer and generates bigger code, but the
    generated programs deliver excellent performance, while retaining the
    moderate memory requirements of the bytecode compiler.
  documentation: https://ocaml.org/docs/
  repository: https://github.com/ocaml/ocaml

extra:
  recipe-maintainers:
    - isuruf
    - dslarm
    - MementoRC
