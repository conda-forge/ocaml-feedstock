--- Makefile.orig	2025-08-22 14:47:04.617245588 -0500
+++ Makefile	2025-08-22 21:24:28.395124074 -0500
@@ -850,2 +850,4 @@
 	$(MAKE) coldstart
+	rm runtime/prims.o
+	$(MAKE) runtime/prims.o
 	$(MAKE) opt.opt
@@ -2215,4 +2217,7 @@
 .INTERMEDIATE: tools/checkstack$(EXE) tools/checkstack.$(O)
+tools/checkstack.$(O): tools/checkstack.c
+	$(V_CC)$(CHECKSTACK_CC) $(OC_CFLAGS) $(CFLAGS) $(OUTPUTOBJ)$@ -c $<
+
 tools/checkstack$(EXE): tools/checkstack.$(O)
-	$(V_MKEXE)$(MKEXE) $(OUTPUTEXE)$@ $<
+	$(V_MKEXE)$(CHECKSTACK_CC) $(OC_LDFLAGS) $(LDFLAGS) $(OUTPUTEXE)$@ $<
 else
